{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from \"react\";\nimport useInfura from \"../shared/hooks/useInfura\";\nimport LatestPrice from \"../features/EthereumData/component\";\nimport BigNumber from \"bignumber.js\";\nimport { ETHEREUM_ORACLE_ADDRESS, LINK_ORACLE_ADDRESS } from \"../shared/abis/ropsten.oracle\";\n\nconst Index = ({\n  title = \"NextJS IPFS Application\"\n}) => {\n  const {\n    oracle\n  } = useInfura({\n    currentChain: process.env.INFURA_ROPSTEN,\n    oracleAddress: ETHEREUM_ORACLE_ADDRESS\n  });\n  const {\n    oracle: linkOracle\n  } = useInfura({\n    currentChain: process.env.INFURA_ROPSTEN,\n    oracleAddress: LINK_ORACLE_ADDRESS\n  });\n  const {\n    0: priceData,\n    1: setPriceData\n  } = useState(\"\");\n  const {\n    0: linkPriceData,\n    1: setLinkPriceData\n  } = useState(\"\");\n\n  const updateLink = () => {\n    linkOracle.methods.latestAnswer().call({}, (error, res) => {\n      if (error != null) {\n        console.log(error);\n        return;\n      }\n\n      console.log(\"Latest price was:\", res);\n      setLinkPriceData(new BigNumber(res).shiftedBy(-8).toFixed(2));\n    });\n  };\n\n  const updateData = () => {\n    oracle.methods.latestAnswer().call({}, (error, res) => {\n      if (error != null) {\n        console.log(error);\n        return;\n      }\n\n      console.log(\"Latest price was:\", res);\n      setPriceData(new BigNumber(res).shiftedBy(-8).toFixed(2));\n    });\n  };\n\n  console.log({\n    oracle\n  });\n  useEffect(() => {\n    updateData();\n    updateLink();\n  }, []);\n  console.log({\n    priceData\n  });\n  return __jsx(\"div\", null, __jsx(\"h2\", null, title), __jsx(LatestPrice, {\n    coin: \"ETH\",\n    price: priceData\n  }), __jsx(\"button\", {\n    onClick: updateData\n  }, \"Update Price\"), __jsx(LatestPrice, {\n    coin: \"Link\",\n    price: linkPriceData\n  }), __jsx(\"button\", {\n    onClick: updateLink\n  }, \"Update LINK Price\"));\n};\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}